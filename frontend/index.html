<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฑุจุงุช ุงุฑุณุงู ูพุงู ุงุชุง - ูุณุฎู ุชุญุช ูุจ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', 'Tahoma', sans-serif;
            background-color: #f8f9fa;
            direction: rtl;
        }
        
        .header {
            background: linear-gradient(135deg, #4a6fa5, #2c5282);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .logo {
            width: 50px;
            height: 50px;
            margin-left: 15px;
        }
        
        .nav-tabs .nav-link {
            color: #495057;
            border: none;
            margin: 0 2px;
        }
        
        .nav-tabs .nav-link.active {
            background-color: #4a6fa5;
            color: white;
            border: none;
        }
        
        .tab-content {
            padding: 20px;
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        
        .card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .card-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            font-weight: bold;
            color: #4a6fa5;
        }
        
        .btn-primary {
            background-color: #4a6fa5;
            border-color: #4a6fa5;
        }
        
        .btn-primary:hover {
            background-color: #3a5f95;
            border-color: #3a5f95;
        }
        
        .progress {
            height: 25px;
            margin: 15px 0;
        }
        
        .progress-bar {
            background-color: #4a6fa5;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin: 2px;
        }
        
        .status-success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-warning {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .log-container {
            height: 300px;
            overflow-y: auto;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .log-success {
            color: #28a745;
        }
        
        .log-error {
            color: #dc3545;
        }
        
        .log-info {
            color: #17a2b8;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .form-control, .form-select {
            text-align: right;
        }
        
        /* ุจุฑุง ููุงุด ุจูุชุฑ ุฑู ููุจุงู */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .card {
                margin-bottom: 15px;
            }
        }
    </style>
    <!-- ูููุช ูุฒุฑ -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
</head>
<body>
    <!-- ูุฏุฑ -->
    <div class="header">
        <div class="container">
            <div class="d-flex align-items-center">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI1IDQ1QzM1LjgyMjggNDUgNDUgMzUuODIyOCA0NSAyNUM0NSAxNC4xNzcyIDM1LjgyMjggNSAyNSA1QzE0LjE3NzIgNSA1IDE0LjE3NzIgNSAyNUM1IDM1LjgyMjggMTQuMTc3MiA0NSAyNSA0NVoiIGZpbGw9IiNmZmYiLz4KPHBhdGggZD0iTTMyIDIwSDM0VjMwSDMyVjIwWiIgZmlsbD0iIzRhNmZhNSIvPgo8cGF0aCBkPSJNMTYgMjBIMThWMzBIMTZWMjBaIiBmaWxsPSIjNGE2ZmE1Ii8+CjxwYXRoIGQ9Ik0zNiAyOUgzNFYzMUgzNlYyOVoiIGZpbGw9IiM0YTZmYTUiLz4KPHBhdGggZD0iTTE0IDI5SDE2VjMxSDE0VjI5WiIgZmlsbD0iIzRhNmZhNSIvPgo8cGF0aCBkPSJNMzAgMTVIMzJWMjVIMzBWMTVaIiBmaWxsPSIjNGE2ZmE1Ii8+CjxwYXRoIGQ9Ik0xOCAxNUgyMFYyNUgxOFYxNVoiIGZpbGw9IiM0YTZmYTUiLz4KPC9zdmc+" alt="ุฑุจุงุช ุงุชุง" class="logo">
                <div class="me-3">
                    <h3 class="mb-0">๐ค ุฑุจุงุช ุงุฑุณุงู ูพุงู ุงุชุง</h3>
                    <p class="mb-0" style="opacity: 0.9;">ูุณุฎู ุชุญุช ูุจ - ุจุฏูู ูุงุฒ ุจู ูุตุจ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุชุจโูุง -->
    <div class="container mt-4">
        <ul class="nav nav-tabs" id="mainTabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#dashboard">
                    <i class="fas fa-home me-2"></i>ุฏุงุดุจูุฑุฏ
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#login">
                    <i class="fas fa-sign-in-alt me-2"></i>ูุฑูุฏ ุจู ุงุชุง
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#send">
                    <i class="fas fa-paper-plane me-2"></i>ุงุฑุณุงู ูพุงู
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#settings">
                    <i class="fas fa-cog me-2"></i>ุชูุธูุงุช
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#reports">
                    <i class="fas fa-chart-bar me-2"></i>ฺฏุฒุงุฑุดโูุง
                </a>
            </li>
        </ul>

        <!-- ูุญุชูุง ุชุจโูุง -->
        <div class="tab-content" id="mainTabsContent">
            <!-- ุชุจ ุฏุงุดุจูุฑุฏ -->
            <div class="tab-pane fade show active" id="dashboard">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header">ุขูุงุฑ ฺฉู</div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-paper-plane fa-3x text-primary"></i>
                                </div>
                                <h3 class="text-center" id="totalMessages">0</h3>
                                <p class="text-center text-muted">ฺฉู ูพุงูโูุง</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header">ูููู</div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-check-circle fa-3x text-success"></i>
                                </div>
                                <h3 class="text-center" id="successMessages">0</h3>
                                <p class="text-center text-muted">ูพุงู ูููู</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header">ุฎุทุง</div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-times-circle fa-3x text-danger"></i>
                                </div>
                                <h3 class="text-center" id="errorMessages">0</h3>
                                <p class="text-center text-muted">ูพุงู ูุงูููู</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header">ูุถุนุช</div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-robot fa-3x text-info"></i>
                                </div>
                                <span class="status-badge status-success" id="botStatus">ุขูุงุฏู</span>
                                <p class="text-center text-muted mt-2">ูุถุนุช ุฑุจุงุช</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <i class="fas fa-bolt me-2"></i>ุนููุงุช ุณุฑุน
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <button class="btn btn-primary w-100" onclick="showTab('login')">
                                    <i class="fas fa-sign-in-alt me-2"></i>ูุฑูุฏ ุจู ุงุชุง
                                </button>
                            </div>
                            <div class="col-md-4 mb-3">
                                <button class="btn btn-success w-100" onclick="showTab('send')">
                                    <i class="fas fa-play me-2"></i>ุดุฑูุน ุงุฑุณุงู ุฌุฏุฏ
                                </button>
                            </div>
                            <div class="col-md-4 mb-3">
                                <button class="btn btn-info w-100" onclick="refreshStats()">
                                    <i class="fas fa-sync-alt me-2"></i>ุจุฑูุฒุฑุณุงู ุขูุงุฑ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุชุจ ูุฑูุฏ ุจู ุงุชุง -->
            <div class="tab-pane fade" id="login">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">ูุฑูุฏ ุจู ุญุณุงุจ ุงุชุง</div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุชุ ุงุจุชุฏุง ุจุงุฏ ุจู ุญุณุงุจ ุงุชุง ูุงุฑุฏ ุดูุฏ
                                </div>
                                
                                <div class="mb-3">
                                    <label for="phoneNumber" class="form-label">ุดูุงุฑู ุชููู ุงุชุง</label>
                                    <input type="text" class="form-control" id="phoneNumber" 
                                           placeholder="ูุซุงู: 09123456789" dir="ltr">
                                    <div class="form-text">ุดูุงุฑู ุจุงุฏ ุจุง 09 ุดุฑูุน ุดูุฏ ู 11 ุฑูู ุจุงุดุฏ</div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="alert alert-warning">
                                        <h6><i class="fas fa-exclamation-triangle me-2"></i>ุฑุงูููุง ูุงฺฏู:</h6>
                                        <ol>
                                            <li>ุดูุงุฑู ุชููู ุฑุง ูุงุฑุฏ ฺฉูุฏ</li>
                                            <li>ุฏฺฉูู "ุดุฑูุน ูุงฺฏู" ุฑุง ุจุฒูุฏ</li>
                                            <li>ูุฑูุฑฺฏุฑ ุจุงุฒ ูโุดูุฏุ ฺฉุฏ ุชุฃุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ</li>
                                            <li>ูพุณ ุงุฒ ูุฑูุฏุ ุฏฺฉูู "ุชุฃุฏ ูุงฺฏู" ุฑุง ุจุฒูุฏ</li>
                                        </ol>
                                    </div>
                                </div>
                                
                                <div class="d-flex gap-2">
                                    <button class="btn btn-primary" onclick="startLogin()" id="loginBtn">
                                        <i class="fas fa-sign-in-alt me-2"></i>ุดุฑูุน ูุงฺฏู
                                    </button>
                                    <button class="btn btn-success" onclick="confirmLogin()" id="confirmBtn" disabled>
                                        <i class="fas fa-check me-2"></i>ุชุฃุฏ ูุงฺฏู
                                    </button>
                                </div>
                                
                                <div id="loginStatus" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">ูุถุนุช ูุดุณุช</div>
                            <div class="card-body">
                                <div id="sessionStatus" class="text-center p-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">ุฏุฑ ุญุงู ุจุฑุฑุณ...</span>
                                    </div>
                                    <p class="mt-2">ุฏุฑ ุญุงู ุจุฑุฑุณ ูุถุนุช ูุดุณุช...</p>
                                </div>
                                
                                <div class="alert alert-secondary">
                                    <h6><i class="fas fa-shield-alt me-2"></i>ุงุทูุงุนุงุช ุงููุช:</h6>
                                    <ul class="mb-0">
                                        <li>ูุดุณุช ุดูุง ุจู ุตูุฑุช ุงูู ุฐุฎุฑู ูโุดูุฏ</li>
                                        <li>ุชููุง ุฏุฑ ููู ุณุณุชู ูุงุจู ุงุณุชูุงุฏู ุงุณุช</li>
                                        <li>ูพุณ ุงุฒ ฺฉ ูุงู ูููุถ ูโุดูุฏ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุชุจ ุงุฑุณุงู ูพุงู -->
            <div class="tab-pane fade" id="send">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">ุชูุธูุงุช ุงุฑุณุงู</div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="sendType" class="form-label">ููุน ุงุฑุณุงู</label>
                                    <select class="form-select" id="sendType" onchange="updateSendType()">
                                        <option value="excel">ุงุฑุณุงู ุจู ูุฎุงุทุจุงู ูุงู ุงฺฉุณู</option>
                                        <option value="group_message">ุงุฑุณุงู ุจู ุขุฏโูุง ฺฉ ูพุงู ฺฏุฑูู</option>
                                    </select>
                                </div>
                                
                                <div id="excelSection" class="mb-3">
                                    <label class="form-label">ูุงู ุงฺฉุณู</label>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="excelFile" 
                                               accept=".xlsx,.xls,.csv" style="display: none;">
                                        <button class="btn btn-outline-secondary" type="button" 
                                                onclick="document.getElementById('excelFile').click()">
                                            <i class="fas fa-file-excel me-2"></i>ุงูุชุฎุงุจ ูุงู
                                        </button>
                                    </div>
                                    <div class="form-text">ูุงู ุจุงุฏ ุญุงู ุณุชูู ุงุฒ @username ุจุงุดุฏ</div>
                                    <div id="excelFileName" class="mt-2 text-muted small"></div>
                                </div>
                                
                                <div id="groupSection" class="mb-3" style="display: none;">
                                    <div class="mb-3">
                                        <label for="groupName" class="form-label">ูุงู ฺฏุฑูู</label>
                                        <input type="text" class="form-control" id="groupName" 
                                               placeholder="ูุงู ฺฏุฑูู ุฏุฑ ุงุชุง">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="messagePrefix" class="form-label">ูพุดููุฏ ูพุงู ูุฏู</label>
                                        <input type="text" class="form-control" id="messagePrefix" 
                                               placeholder="ูุซุงู: ูุงฺฺฉ_ุณุงุนุช">
                                        <div class="form-text">ุฑุจุงุช ูพุงูโูุง ุญุงู ุงู ูพุดููุฏ ุฑุง ุฏุฑ ฺฏุฑูู ูพุฏุง ูโฺฉูุฏ</div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="messageToSend" class="form-label">ูุชู ูพุงู</label>
                                    <textarea class="form-control" id="messageToSend" rows="3" 
                                              placeholder="ูุชู ูพุงู ฺฉู ูโุฎูุงูุฏ ุงุฑุณุงู ุดูุฏ..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ูุงุตูู ุงุฑุณุงู (ุซุงูู)</label>
                                    <div class="row">
                                        <div class="col">
                                            <input type="number" class="form-control" id="minDelay" 
                                                   min="1" max="60" step="0.5" value="2.0" placeholder="ุญุฏุงูู">
                                        </div>
                                        <div class="col-auto align-self-center">ุชุง</div>
                                        <div class="col">
                                            <input type="number" class="form-control" id="maxDelay" 
                                                   min="2" max="120" step="0.5" value="5.0" placeholder="ุญุฏุงฺฉุซุฑ">
                                        </div>
                                    </div>
                                    <div class="form-text">ุฑุจุงุช ุจู ุตูุฑุช ุฑูุฏูู ุจู ุงู ุฏู ููุฏุงุฑ ุชุฃุฎุฑ ุงุฌุงุฏ ูโฺฉูุฏ</div>
                                </div>
                                
                                <button class="btn btn-success w-100" onclick="startSending()" id="sendBtn">
                                    <i class="fas fa-play me-2"></i>ุดุฑูุน ุงุฑุณุงู
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card mb-3">
                            <div class="card-header">ูุธุงุฑุช ุจุฑ ุงุฑุณุงู</div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>ูพุดุฑูุช ุงุฑุณุงู</span>
                                        <span id="progressText">0%</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="row text-center mb-3">
                                    <div class="col">
                                        <div class="p-2 bg-light rounded">
                                            <div class="fw-bold" id="sentCount">0</div>
                                            <small>ุงุฑุณุงู ุดุฏู</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-2 bg-light rounded">
                                            <div class="fw-bold text-success" id="successCount">0</div>
                                            <small>ูููู</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-2 bg-light rounded">
                                            <div class="fw-bold text-danger" id="errorCount">0</div>
                                            <small>ุฎุทุง</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-2 bg-light rounded">
                                            <div class="fw-bold" id="remainingCount">0</div>
                                            <small>ุจุงูโูุงูุฏู</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn btn-danger w-100" onclick="stopSending()" id="stopBtn" disabled>
                                    <i class="fas fa-stop me-2"></i>ุชููู ุงุฑุณุงู
                                </button>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-terminal me-2"></i>ูุงฺฏ ุงุฑุณุงู ุฒูุฏู</span>
                                <button class="btn btn-sm btn-outline-secondary" onclick="clearLog()">
                                    <i class="fas fa-trash me-1"></i>ูพุงฺฉ ฺฉุฑุฏู
                                </button>
                            </div>
                            <div class="card-body p-0">
                                <div class="log-container" id="logContainer">
                                    <div class="log-entry log-info">ุณุณุชู ุฑุงูโุงูุฏุงุฒ ุดุฏ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุชุจ ุชูุธูุงุช -->
            <div class="tab-pane fade" id="settings">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">ุชูุธูุงุช ุนููู</div>
                            <div class="card-body">
                                <form id="settingsForm">
                                    <div class="mb-3">
                                        <label for="defaultMessage" class="form-label">ูพุงู ูพุดโูุฑุถ</label>
                                        <textarea class="form-control" id="defaultMessage" rows="4">
ุณูุงู [ูุงู] ุนุฒุฒุ
ุงู ูพุงู ุงุฒ ุทุฑู [ุณุงุฒูุงู] ุงุณุช.
ุจุง ุชุดฺฉุฑ
                                        </textarea>
                                        <div class="form-text">ูโุชูุงูุฏ ุงุฒ [ูุงู] ู [ุณุงุฒูุงู] ุฏุฑ ูุชู ุงุณุชูุงุฏู ฺฉูุฏ</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultMinDelay" class="form-label">ุญุฏุงูู ุชุงุฎุฑ ูพุดโูุฑุถ (ุซุงูู)</label>
                                        <input type="number" class="form-control" id="defaultMinDelay" 
                                               min="1" max="10" step="0.5" value="2.0">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultMaxDelay" class="form-label">ุญุฏุงฺฉุซุฑ ุชุงุฎุฑ ูพุดโูุฑุถ (ุซุงูู)</label>
                                        <input type="number" class="form-control" id="defaultMaxDelay" 
                                               min="2" max="15" step="0.5" value="5.0">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxPerHour" class="form-label">ุญุฏุงฺฉุซุฑ ูพุงู ุฏุฑ ุณุงุนุช</label>
                                        <input type="number" class="form-control" id="maxPerHour" 
                                               min="10" max="500" value="100">
                                    </div>
                                    
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-primary" onclick="saveSettings()">
                                            <i class="fas fa-save me-2"></i>ุฐุฎุฑู ุชูุธูุงุช
                                        </button>
                                        <button type="button" class="btn btn-secondary" onclick="loadSettings()">
                                            <i class="fas fa-sync-alt me-2"></i>ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">ุงุทูุงุนุงุช ุณุณุชู</div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">ูุถุนุช ุณุฑูุฑ</label>
                                    <div class="alert alert-success">
                                        <i class="fas fa-check-circle me-2"></i>
                                        ุณุฑูุฑ ูุนุงู ู ุขูุงุฏู ุจู ฺฉุงุฑ
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ูุถุนุช ูพูุฑุช</label>
                                    <div class="alert alert-info">
                                        <i class="fas fa-plug me-2"></i>
                                        ูพูุฑุช 5000 ุฏุฑ ุญุงู ุดููุฏ
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ูุถุง ุฐุฎุฑูโุณุงุฒ</label>
                                    <div class="progress mb-2">
                                        <div class="progress-bar" style="width: 25%"></div>
                                    </div>
                                    <div class="text-center small text-muted">25% ุงุฒ 100MB ุงุณุชูุงุฏู ุดุฏู</div>
                                </div>
                                
                                <div class="mb-3">
                                    <button class="btn btn-outline-danger w-100" onclick="clearAllData()">
                                        <i class="fas fa-trash-alt me-2"></i>ูพุงฺฉ ฺฉุฑุฏู ุชูุงู ุฏุงุฏูโูุง
                                    </button>
                                    <div class="form-text text-danger">ุงู ุนูู ูุงุจู ุจุงุฒฺฏุดุช ูุณุช!</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุชุจ ฺฏุฒุงุฑุดโูุง -->
            <div class="tab-pane fade" id="reports">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>ฺฏุฒุงุฑุดโูุง ุงุฑุณุงู</span>
                        <div class="d-flex gap-2">
                            <input type="date" class="form-control form-control-sm" id="startDate">
                            <input type="date" class="form-control form-control-sm" id="endDate">
                            <button class="btn btn-sm btn-primary" onclick="filterReports()">
                                <i class="fas fa-filter me-1"></i>ููุชุฑ
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ุชุงุฑุฎ</th>
                                        <th>ฺฉู ูพุงูโูุง</th>
                                        <th>ูููู</th>
                                        <th>ุฎุทุง</th>
                                        <th>ูุฑุฎ ููููุช</th>
                                        <th>ุนููุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="reportsTable">
                                    <tr>
                                        <td colspan="6" class="text-center">ูฺ ฺฏุฒุงุฑุด ููุฌูุฏ ูุณุช</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุชุฑ -->
    <footer class="bg-dark text-white mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>ุฑุจุงุช ุงุฑุณุงู ูพุงู ุงุชุง</h5>
                    <p class="text-muted">ูุณุฎู ุชุญุช ูุจ - ุชูุณุนู ุงูุชู ุจุฑุง ุงุณุชูุงุฏู ุขุณุงู</p>
                </div>
                <div class="col-md-4">
                    <h5>ููฺฉโูุง ููุฏ</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light" onclick="showTab('dashboard')"><i class="fas fa-arrow-left me-1"></i> ุฏุงุดุจูุฑุฏ</a></li>
                        <li><a href="#" class="text-light" onclick="showTab('settings')"><i class="fas fa-arrow-left me-1"></i> ุชูุธูุงุช</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>ุฑุงูููุง</h5>
                    <p class="text-muted">ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉูุ ุฏฺฉูู ุฑุงูููุง ุฏุฑ ูุฑ ุจุฎุด ุฑุง ุจุฒูุฏ</p>
                </div>
            </div>
            <hr class="bg-secondary">
            <div class="d-flex justify-content-between align-items-center">
                <div>ยฉ ฑดฐณ - ุชูุงู ุญููู ูุญููุธ ุงุณุช | ูุณุฎู ฑ.ฐ.ฐ</div>
                <div>
                    <a href="#" class="text-light me-3"><i class="fab fa-github fa-lg"></i></a>
                    <a href="#" class="text-light"><i class="fab fa-telegram fa-lg"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ุงุณฺฉุฑูพุชโูุง -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_BASE_URL = 'http://localhost:5000/api';
        let currentBotId = null;
        let isSending = false;
        let sendStats = { total: 0, sent: 0, success: 0, error: 0 };
        
        // ุชูุงุจุน ุนููู
        function showTab(tabId) {
            const tabTrigger = document.querySelector(`[data-bs-target="#${tabId}"]`);
            if (tabTrigger) {
                bootstrap.Tab.getOrCreateInstance(tabTrigger).show();
            }
        }
        
        function showNotification(message, type = 'info') {
            const alertTypes = {
                'success': 'alert-success',
                'error': 'alert-danger',
                'warning': 'alert-warning',
                'info': 'alert-info'
            };
            
            const alertClass = alertTypes[type] || 'alert-info';
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.remove();
                }
            }, 5000);
        }
        
        function addToLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `<span class="text-muted">[${timestamp}]</span> ${message}`;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('logContainer').innerHTML = 
                '<div class="log-entry log-info">ูุงฺฏ ูพุงฺฉ ุดุฏ</div>';
        }
        
        // ุชูุงุจุน ุฑุจุงุช
        async function startLogin() {
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            
            if (!phoneNumber.match(/^09\d{9}$/)) {
                showNotification('ุดูุงุฑู ุชููู ุจุงุฏ ุจุง 09 ุดุฑูุน ุดูุฏ ู 11 ุฑูู ุจุงุดุฏ', 'error');
                return;
            }
            
            try {
                // ุงฺฏุฑ ุฑุจุงุช ูุฏุงุฑูุ ุจุณุงุฒู
                if (!currentBotId) {
                    await createBot();
                }
                
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone_number: phoneNumber })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    if (data.status === 'waiting') {
                        showNotification('ูุฑูุฑฺฏุฑ ุจุงุฒ ุดุฏ. ูุทูุงู ฺฉุฏ ุชุฃุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ', 'info');
                        document.getElementById('loginBtn').disabled = true;
                        document.getElementById('confirmBtn').disabled = false;
                        document.getElementById('loginStatus').innerHTML = 
                            '<div class="alert alert-info mt-3">ุฏุฑ ุงูุชุธุงุฑ ุชุฃุฏ ูุงฺฏู ุฏุฑ ูุฑูุฑฺฏุฑ...</div>';
                        addToLog('ูุฑูุฑฺฏุฑ ุจุฑุง ูุงฺฏู ุจุงุฒ ุดุฏ', 'info');
                    }
                } else {
                    showNotification(data.error || 'ุฎุทุง ุฏุฑ ูุงฺฏู', 'error');
                }
            } catch (error) {
                showNotification('ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ', 'error');
                console.error(error);
            }
        }
        
        async function confirmLogin() {
            if (!currentBotId) {
                showNotification('ุฑุจุงุช ูุนุงู ูุฌูุฏ ูุฏุงุฑุฏ', 'warning');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/confirm-login`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification('ูุงฺฏู ุชุฃุฏ ุดุฏ', 'success');
                    document.getElementById('confirmBtn').disabled = true;
                    document.getElementById('loginStatus').innerHTML = 
                        '<div class="alert alert-success mt-3">โ ูุงฺฏู ุชุฃุฏ ุดุฏ. ูโุชูุงูุฏ ุงุฑุณุงู ุฑุง ุดุฑูุน ฺฉูุฏ.</div>';
                    document.getElementById('sendBtn').disabled = false;
                    addToLog('ูุงฺฏู ููููุชโุขูุฒ ุจูุฏ', 'success');
                } else {
                    showNotification(data.error || 'ูุงฺฏู ุชุฃุฏ ูุดุฏ', 'error');
                }
            } catch (error) {
                showNotification('ุฎุทุง ุฏุฑ ุชุฃุฏ ูุงฺฏู', 'error');
                console.error(error);
            }
        }
        
        async function createBot() {
            try {
                const response = await fetch(`${API_BASE_URL}/bot/create`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        bot_id: `bot_${Date.now()}`,
                        headless: false,
                        min_delay: parseFloat(document.getElementById('minDelay').value),
                        max_delay: parseFloat(document.getElementById('maxDelay').value)
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentBotId = data.bot_id;
                    showNotification('ุฑุจุงุช ุจุง ููููุช ุงุฌุงุฏ ุดุฏ', 'success');
                    return true;
                } else {
                    showNotification(data.error || 'ุฎุทุง ุฏุฑ ุงุฌุงุฏ ุฑุจุงุช', 'error');
                    return false;
                }
            } catch (error) {
                showNotification('ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ', 'error');
                console.error(error);
                return false;
            }
        }
        
        function updateSendType() {
            const sendType = document.getElementById('sendType').value;
            const excelSection = document.getElementById('excelSection');
            const groupSection = document.getElementById('groupSection');
            
            if (sendType === 'excel') {
                excelSection.style.display = 'block';
                groupSection.style.display = 'none';
            } else {
                excelSection.style.display = 'none';
                groupSection.style.display = 'block';
            }
        }
        
        // ูุฏุฑุช ูุงู ุงฺฉุณู
        document.getElementById('excelFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('excelFileName').textContent = 
                    `ูุงู ุงูุชุฎุงุจ ุดุฏู: ${file.name} (${(file.size / 1024).toFixed(1)} KB)`;
                addToLog(`ูุงู ุงฺฉุณู ุงูุชุฎุงุจ ุดุฏ: ${file.name}`, 'info');
            }
        });
        
        // ุณุงุฑ ุชูุงุจุน
        function refreshStats() {
            // ุดุจูโุณุงุฒ ุขูุงุฑ
            const total = Math.floor(Math.random() * 1000) + 500;
            const success = Math.floor(total * 0.95);
            const error = total - success;
            
            document.getElementById('totalMessages').textContent = total.toLocaleString();
            document.getElementById('successMessages').textContent = success.toLocaleString();
            document.getElementById('errorMessages').textContent = error.toLocaleString();
            
            showNotification('ุขูุงุฑ ุจุฑูุฒุฑุณุงู ุดุฏ', 'success');
        }
        
        function clearAllData() {
            if (confirm('โ๏ธ ุขุง ูุทูุฆู ูุณุชุฏ ูโุฎูุงูุฏ ุชูุงู ุฏุงุฏูโูุง ุฑุง ูพุงฺฉ ฺฉูุฏุ\nุงู ุนูู ูุงุจู ุจุงุฒฺฏุดุช ูุณุช!')) {
                showNotification('ุชูุงู ุฏุงุฏูโูุง ูพุงฺฉ ุดุฏูุฏ', 'info');
                addToLog('ุชูุงู ุฏุงุฏูโูุง ุณุณุชู ูพุงฺฉ ุดุฏูุฏ', 'warning');
            }
        }
        
        // ุจุงุฑฺฏุฐุงุฑ ุงููู
        document.addEventListener('DOMContentLoaded', function() {
            // ุชุณุช ุงุชุตุงู ุจู ุณุฑูุฑ
            fetch(`${API_BASE_URL}/settings`)
                .then(response => {
                    if (response.ok) {
                        document.getElementById('botStatus').textContent = 'ูุชุตู ุจู ุณุฑูุฑ';
                    }
                })
                .catch(() => {
                    showNotification('ุณุฑูุฑ ุฏุฑ ุฏุณุชุฑุณ ูุณุช. ูุทูุฆู ุดูุฏ ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุงุณุช.', 'error');
                });
            
            // ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช ุงููู
            loadSettings();
            
            // ุจุฑูุฒุฑุณุงู ูุถุนุช
            setInterval(refreshStats, 30000);
        });
        
        // ุชูุงุจุน ุณุงุฏู ุจุฑุง ุชุณุช
        async function startSending() {
            if (!currentBotId) {
                await createBot();
            }
            
            const message = document.getElementById('messageToSend').value;
            if (!message.trim()) {
                showNotification('ูุทูุงู ูุชู ูพุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ', 'error');
                return;
            }
            
            // ุดุจูโุณุงุฒ ุงุฑุณุงู
            sendStats = { total: 50, sent: 0, success: 0, error: 0 };
            isSending = true;
            
            document.getElementById('sendBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            
            showNotification('ุงุฑุณุงู ุดุฑูุน ุดุฏ', 'success');
            addToLog('ุดุฑูุน ุนููุงุช ุงุฑุณุงู ูพุงูโูุง', 'info');
            
            // ุดุจูโุณุงุฒ ูพุดุฑูุช
            const interval = setInterval(() => {
                if (!isSending) {
                    clearInterval(interval);
                    return;
                }
                
                if (sendStats.sent < sendStats.total) {
                    sendStats.sent += 2;
                    sendStats.success += Math.floor(Math.random() * 2) + 1;
                    sendStats.error = sendStats.sent - sendStats.success;
                    
                    if (sendStats.sent > sendStats.total) {
                        sendStats.sent = sendStats.total;
                        sendStats.success = Math.floor(sendStats.total * 0.95);
                        sendStats.error = sendStats.total - sendStats.success;
                    }
                    
                    const progress = Math.round((sendStats.sent / sendStats.total) * 100);
                    document.getElementById('progressBar').style.width = `${progress}%`;
                    document.getElementById('progressText').textContent = `${progress}%`;
                    
                    document.getElementById('sentCount').textContent = sendStats.sent;
                    document.getElementById('successCount').textContent = sendStats.success;
                    document.getElementById('errorCount').textContent = sendStats.error;
                    document.getElementById('remainingCount').textContent = sendStats.total - sendStats.sent;
                    
                    if (Math.random() > 0.7) {
                        addToLog(`ูพุงู ${sendStats.sent}/${sendStats.total} ุงุฑุณุงู ุดุฏ`, 'success');
                    }
                    
                    if (sendStats.sent >= sendStats.total) {
                        clearInterval(interval);
                        isSending = false;
                        document.getElementById('sendBtn').disabled = false;
                        document.getElementById('stopBtn').disabled = true;
                        showNotification('ุงุฑุณุงู ฺฉุงูู ุดุฏ', 'success');
                        addToLog('ุนููุงุช ุงุฑุณุงู ุจุง ููููุช ฺฉุงูู ุดุฏ', 'success');
                    }
                }
            }, 1000);
        }
        
        function stopSending() {
            if (confirm('ุขุง ูโุฎูุงูุฏ ุงุฑุณุงู ุฑุง ูุชููู ฺฉูุฏุ')) {
                isSending = false;
                document.getElementById('sendBtn').disabled = false;
                document.getElementById('stopBtn').disabled = true;
                showNotification('ุงุฑุณุงู ูุชููู ุดุฏ', 'warning');
                addToLog('ุงุฑุณุงู ุชูุณุท ฺฉุงุฑุจุฑ ูุชููู ุดุฏ', 'warning');
            }
        }
        
        function loadSettings() {
            // ุดุจูโุณุงุฒ ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช
            showNotification('ุชูุธูุงุช ุจุงุฑฺฏุฐุงุฑ ุดุฏ', 'info');
        }
        
        function saveSettings() {
            showNotification('ุชูุธูุงุช ุฐุฎุฑู ุดุฏ', 'success');
        }
        
        function filterReports() {
            showNotification('ฺฏุฒุงุฑุดโูุง ููุชุฑ ุดุฏูุฏ', 'info');
        }
    </script>
</body>
</html>