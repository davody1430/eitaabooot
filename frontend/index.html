<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– Ø±Ø¨Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø§ÛŒØªØ§ - Ù†Ø³Ø®Ù‡ ØªØ­Øª ÙˆØ¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #2c5282;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            font-family: 'Vazirmatn', 'Tahoma', sans-serif;
            background-color: #f5f7fb;
            direction: rtl;
            min-height: 100vh;
        }
        
        /* Ù‡Ø¯Ø± */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            margin-left: 15px;
            background: white;
            border-radius: 50%;
            padding: 5px;
        }
        
        /* ØªØ¨â€ŒÙ‡Ø§ */
        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
            background: white;
            border-radius: 10px 10px 0 0;
            padding: 10px 10px 0;
        }
        
        .nav-tabs .nav-link {
            color: #495057;
            border: none;
            margin: 0 5px;
            border-radius: 8px 8px 0 0;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-tabs .nav-link:hover {
            background-color: rgba(74, 111, 165, 0.1);
        }
        
        .nav-tabs .nav-link.active {
            background-color: var(--primary-color);
            color: white;
            border: none;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        
        /* Ù…Ø­ØªÙˆØ§ÛŒ ØªØ¨â€ŒÙ‡Ø§ */
        .tab-content {
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 10px 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            min-height: 500px;
        }
        
        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
        .card {
            border: 1px solid #e1e5eb;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .card-header {
            background-color: #f8fafd;
            border-bottom: 1px solid #e1e5eb;
            font-weight: 600;
            color: var(--primary-color);
            padding: 15px 20px;
            border-radius: 12px 12px 0 0 !important;
        }
        
        .card-body {
            padding: 20px;
        }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
        .btn {
            border-radius: 8px;
            font-weight: 500;
            padding: 10px 20px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            border-color: var(--warning-color);
            color: #000;
        }
        
        /* Ù¾ÛŒØ´Ø±ÙØª */
        .progress {
            height: 20px;
            border-radius: 10px;
            margin: 15px 0;
            background-color: #e9ecef;
            overflow: hidden;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.6s ease;
        }
        
        /* Ù†Ø´Ø§Ù†Ú¯Ø± ÙˆØ¶Ø¹ÛŒØª */
        .status-badge {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            margin: 2px;
        }
        
        .status-success {
            background-color: rgba(40, 167, 69, 0.15);
            color: var(--success-color);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        
        .status-warning {
            background-color: rgba(255, 193, 7, 0.15);
            color: #856404;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }
        
        .status-error {
            background-color: rgba(220, 53, 69, 0.15);
            color: var(--danger-color);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        
        .status-info {
            background-color: rgba(23, 162, 184, 0.15);
            color: var(--info-color);
            border: 1px solid rgba(23, 162, 184, 0.3);
        }
        
        /* Ù„Ø§Ú¯ */
        .log-container {
            height: 300px;
            overflow-y: auto;
            background-color: #f8fafd;
            border: 1px solid #e1e5eb;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            word-wrap: break-word;
        }
        
        .log-success {
            color: var(--success-color);
            border-right: 3px solid var(--success-color);
            padding-right: 10px;
        }
        
        .log-error {
            color: var(--danger-color);
            border-right: 3px solid var(--danger-color);
            padding-right: 10px;
        }
        
        .log-info {
            color: var(--info-color);
            border-right: 3px solid var(--info-color);
            padding-right: 10px;
        }
        
        .log-warning {
            color: var(--warning-color);
            border-right: 3px solid var(--warning-color);
            padding-right: 10px;
        }
        
        /* Ø¬Ø¯Ø§ÙˆÙ„ */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #e1e5eb;
        }
        
        table {
            width: 100%;
            margin-bottom: 0;
        }
        
        th {
            background-color: #f8fafd;
            font-weight: 600;
            color: var(--primary-color);
            padding: 12px 15px;
            border-bottom: 2px solid #e1e5eb;
        }
        
        td {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        tr:hover {
            background-color: rgba(74, 111, 165, 0.05);
        }
        
        /* ÙØ±Ù…â€ŒÙ‡Ø§ */
        .form-control, .form-select {
            border: 1px solid #ced4da;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(74, 111, 165, 0.25);
        }
        
        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
            color: #495057;
        }
        
        .form-text {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }
        
        /* Ø¢Ù…Ø§Ø± */
        .stat-box {
            background: linear-gradient(135deg, #f8fafd, #fff);
            border: 1px solid #e1e5eb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .stat-icon {
            font-size: 40px;
            margin-bottom: 15px;
            opacity: 0.8;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Ø²ÙˆÙ† Ø¯Ø±Ø§Ù¾ ÙØ§ÛŒÙ„ */
        .drop-zone {
            border: 2px dashed #ced4da;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #f8fafd;
            margin: 20px 0;
        }
        
        .drop-zone:hover {
            border-color: var(--primary-color);
            background-color: rgba(74, 111, 165, 0.05);
        }
        
        .drop-zone.dragover {
            border-color: var(--success-color);
            background-color: rgba(40, 167, 69, 0.05);
        }
        
        /* Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† */
        .notification {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            max-width: 500px;
            margin: 0 auto;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 9999;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease;
            font-weight: 500;
        }
        
        .notification-success {
            background-color: var(--success-color);
            color: white;
            border-right: 5px solid #1e7e34;
        }
        
        .notification-error {
            background-color: var(--danger-color);
            color: white;
            border-right: 5px solid #bd2130;
        }
        
        .notification-warning {
            background-color: var(--warning-color);
            color: #000;
            border-right: 5px solid #d39e00;
        }
        
        .notification-info {
            background-color: var(--info-color);
            color: white;
            border-right: 5px solid #117a8b;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Ù¾Ø§Ø³Ø®Ú¯Ùˆ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header .d-flex {
                flex-direction: column;
                text-align: center;
            }
            
            .logo {
                margin: 0 auto 10px;
            }
            
            .nav-tabs .nav-link {
                font-size: 12px;
                padding: 8px 12px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .stat-box {
                margin-bottom: 15px;
            }
        }
        
        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ÙÙˆØªÙˆØ± */
        footer {
            background: linear-gradient(135deg, #343a40, #212529);
            color: white;
            margin-top: 50px;
            padding: 40px 0 20px;
        }
        
        footer a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        footer a:hover {
            color: white;
        }
        
        footer hr {
            border-color: #495057;
            margin: 30px 0;
        }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ */
        .required::after {
            content: " *";
            color: var(--danger-color);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .section-title {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e5eb;
        }
    </style>
</head>
<body>
    <!-- Ù‡Ø¯Ø± -->
    <div class="header">
        <div class="container">
            <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                    <div class="logo">
                        <i class="fas fa-robot fa-2x" style="color: var(--primary-color);"></i>
                    </div>
                    <div class="me-3">
                        <h3 class="mb-1">ğŸ¤– Ø±Ø¨Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø§ÛŒØªØ§</h3>
                        <p class="mb-0" style="opacity: 0.9; font-size: 14px;">Ù†Ø³Ø®Ù‡ ØªØ­Øª ÙˆØ¨ - Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†ØµØ¨</p>
                    </div>
                </div>
                <div class="d-none d-md-block">
                    <span id="serverStatus" class="status-badge status-success">
                        <i class="fas fa-circle fa-xs me-1"></i> Ø³Ø±ÙˆØ± ÙØ¹Ø§Ù„
                    </span>
                    <span id="connectionStatus" class="status-badge status-warning ms-2">
                        <i class="fas fa-plug fa-xs me-1"></i> Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ -->
    <div class="container mt-4">
        <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab">
                    <i class="fas fa-home me-2"></i>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab">
                    <i class="fas fa-sign-in-alt me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="contacts-tab" data-bs-toggle="tab" data-bs-target="#contacts" type="button" role="tab">
                    <i class="fas fa-users me-2"></i>Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="send-tab" data-bs-toggle="tab" data-bs-target="#send" type="button" role="tab">
                    <i class="fas fa-paper-plane me-2"></i>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">
                    <i class="fas fa-chart-bar me-2"></i>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">
                    <i class="fas fa-cog me-2"></i>ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                </button>
            </li>
        </ul>

        <!-- Ù…Ø­ØªÙˆØ§ÛŒ ØªØ¨â€ŒÙ‡Ø§ -->
        <div class="tab-content" id="mainTabsContent">
            <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
            <div class="tab-pane fade show active" id="dashboard" role="tabpanel">
                <div class="row mb-4 fade-in">
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="stat-box">
                            <div class="stat-icon text-primary">
                                <i class="fas fa-paper-plane"></i>
                            </div>
                            <div class="stat-value" id="totalMessages">0</div>
                            <div class="stat-label">Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="stat-box">
                            <div class="stat-icon text-success">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-value" id="successMessages">0</div>
                            <div class="stat-label">Ù…ÙˆÙÙ‚</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="stat-box">
                            <div class="stat-icon text-danger">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-value" id="errorMessages">0</div>
                            <div class="stat-label">Ø®Ø·Ø§</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="stat-box">
                            <div class="stat-icon text-info">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="stat-value" id="contactsCount">0</div>
                            <div class="stat-label">Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</div>
                        </div>
                    </div>
                </div>

                <div class="row fade-in">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-bolt me-2"></i>Ø¹Ù…Ù„ÛŒØ§Øª Ø³Ø±ÛŒØ¹</span>
                                <span class="badge bg-primary">Ø¢Ù…Ø§Ø¯Ù‡</span>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <button class="btn btn-primary w-100" onclick="switchToTab('login')">
                                            <i class="fas fa-sign-in-alt me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-success w-100" onclick="switchToTab('send')">
                                            <i class="fas fa-play me-2"></i>Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-info w-100" onclick="refreshDashboard()">
                                            <i class="fas fa-sync-alt me-2"></i>Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-warning w-100" onclick="createBotInstance()">
                                            <i class="fas fa-plus me-2"></i>Ø§ÛŒØ¬Ø§Ø¯ Ø±Ø¨Ø§Øª
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-outline-primary w-100" onclick="testBotConnection()">
                                            <i class="fas fa-vial me-2"></i>ØªØ³Øª Ø§ØªØµØ§Ù„
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button class="btn btn-outline-danger w-100" onclick="clearAllData()">
                                            <i class="fas fa-trash-alt me-2"></i>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-info-circle me-2"></i>ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Ø­Ø§ÙØ¸Ù‡ Ø³Ø±ÙˆØ±</small>
                                        <small id="memoryUsage">0 MB</small>
                                    </div>
                                    <div class="progress">
                                        <div id="memoryBar" class="progress-bar" style="width: 25%"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ</small>
                                        <small id="storageUsage">25%</small>
                                    </div>
                                    <div class="progress">
                                        <div id="storageBar" class="progress-bar" style="width: 25%"></div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <div class="alert alert-light">
                                        <i class="fas fa-clock me-2"></i>
                                        <span id="uptime">Ø²Ù…Ø§Ù† ÙØ¹Ø§Ù„ÛŒØª: Ù…Ø­Ø§Ø³Ø¨Ù‡...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row fade-in">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-terminal me-2"></i>Ù„Ø§Ú¯ Ø³ÛŒØ³ØªÙ…</span>
                                <button class="btn btn-sm btn-outline-secondary" onclick="clearSystemLog()">
                                    <i class="fas fa-trash me-1"></i>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
                                </button>
                            </div>
                            <div class="card-body p-0">
                                <div class="log-container" id="systemLog">
                                    <div class="log-entry log-info">Ø³ÛŒØ³ØªÙ… Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯</div>
                                    <div class="log-entry log-info">Ù…Ù†ØªØ¸Ø± Ø¯Ø³ØªÙˆØ±Ø§Øª Ú©Ø§Ø±Ø¨Ø±...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù„Ø§Ú¯ÛŒÙ† -->
            <div class="tab-pane fade" id="login" role="tabpanel">
                <div class="row fade-in">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-sign-in-alt me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø§ÛŒØªØ§
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info mb-4">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§ØªØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø§ÛŒØªØ§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯. Ø§ÛŒÙ† ÙØ±Ø¢ÛŒÙ†Ø¯ ØªÙ†Ù‡Ø§ ÛŒÚ© Ø¨Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                                </div>
                                
                                <div class="mb-3">
                                    <label for="phoneNumber" class="form-label required">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø§ÛŒØªØ§</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                        <input type="tel" class="form-control" id="phoneNumber" 
                                               placeholder="09123456789" dir="ltr" maxlength="11">
                                    </div>
                                    <div class="form-text">Ø´Ù…Ø§Ø±Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ 09 Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯ Ùˆ 11 Ø±Ù‚Ù…ÛŒ Ø¨Ø§Ø´Ø¯</div>
                                </div>
                                
                                <div class="alert alert-warning mb-4">
                                    <h6 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ†</h6>
                                    <ol class="mb-0 mt-2">
                                        <li>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                                        <li>Ø¯Ú©Ù…Ù‡ "Ø´Ø±ÙˆØ¹ Ù„Ø§Ú¯ÛŒÙ†" Ø±Ø§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                                        <li>Ù¾Ù†Ø¬Ø±Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                                        <li>Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ØŒ Ø¨Ù‡ Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø§Ø²Ú¯Ø±Ø¯ÛŒØ¯</li>
                                    </ol>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button class="btn btn-primary" onclick="startLogin()" id="loginBtn">
                                        <i class="fas fa-sign-in-alt me-2"></i>Ø´Ø±ÙˆØ¹ Ù„Ø§Ú¯ÛŒÙ†
                                    </button>
                                    <button class="btn btn-outline-danger" onclick="logout()" id="logoutBtn" style="display: none;">
                                        <i class="fas fa-sign-out-alt me-2"></i>Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨
                                    </button>
                                </div>
                                
                                <div id="codeEntrySection" class="mt-4" style="display: none;">
                                    <hr>
                                    <h5 class="section-title">Ù…Ø±Ø­Ù„Ù‡ Û²: ØªØ£ÛŒÛŒØ¯ ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ</h5>
                                    <p class="mb-3"><b>Ù…Ù‡Ù…:</b> Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø¯ Ø±Ø§ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¨Ø§Ø² Ø´Ø¯Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯ÛŒØ¯ Ùˆ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ Ø´Ø¯ÛŒØ¯ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ ÙˆØ±ÙˆØ¯ Ø´Ù…Ø§ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ø´ÙˆØ¯.</p>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success btn-lg" onclick="submitCode()" id="submitCodeBtn">
                                            <i class="fas fa-check-double me-2"></i>ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù…
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="loginStatus" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-shield-alt me-2"></i>ÙˆØ¶Ø¹ÛŒØª Ù†Ø´Ø³Øª
                            </div>
                            <div class="card-body">
                                <div id="sessionStatus" class="text-center p-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span>
                                    </div>
                                    <p class="mt-3">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù†Ø´Ø³Øª...</p>
                                </div>
                                
                                <div class="alert alert-secondary">
                                    <h6><i class="fas fa-lock me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ</h6>
                                    <ul class="mb-0 mt-2">
                                        <li>Ù†Ø´Ø³Øª Ø´Ù…Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø§Ù…Ù† Ø¯Ø± Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                                        <li>ØªÙ†Ù‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù‡Ù…ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª</li>
                                        <li>Ù¾Ø³ Ø§Ø² 30 Ø±ÙˆØ² Ù…Ù†Ù‚Ø¶ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                                        <li>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù„Ø§Ú¯ÛŒÙ† Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                                    </ul>
                                </div>
                                
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h6><i class="fas fa-robot me-2"></i>Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„</h6>
                                        <div id="botInfo" style="display: none;">
                                            <p class="mb-1">Ø´Ù†Ø§Ø³Ù‡: <code id="currentBotId">---</code></p>
                                            <p class="mb-1">ÙˆØ¶Ø¹ÛŒØª: <span id="botStatusText" class="badge bg-secondary">Ù†Ø§Ù…Ø´Ø®Øµ</span></p>
                                            <p class="mb-0">Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡: <span id="botCreatedAt">---</span></p>
                                        </div>
                                        <div id="noBotInfo" class="text-muted">
                                            <i class="fas fa-info-circle me-2"></i>Ù‡ÛŒÚ† Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø®Ø§Ø·Ø¨ÛŒÙ† -->
            <div class="tab-pane fade" id="contacts" role="tabpanel">
                <div class="row fade-in">
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-upload me-2"></i>Ø¢Ù¾Ù„ÙˆØ¯ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„</label>
                                    <div class="drop-zone" id="dropZone" ondragover="dragOver(event)" ondragleave="dragLeave(event)" ondrop="dropFile(event)">
                                        <i class="fas fa-cloud-upload-alt fa-3x mb-3" style="color: var(--primary-color);"></i>
                                        <p class="mb-2">ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„ ÛŒØ§ CSV Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯</p>
                                        <p class="text-muted small">ÛŒØ§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ ÙØ§ÛŒÙ„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</p>
                                        <input type="file" id="fileInput" class="d-none" accept=".xlsx,.xls,.csv" onchange="handleFileSelect(this)">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ÙØ±Ù…Øª ÙØ§ÛŒÙ„</label>
                                    <div class="alert alert-light">
                                        <i class="fas fa-file-excel me-2 text-success"></i>
                                        <span>ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ Ø³ØªÙˆÙ†ÛŒ Ø§Ø² @username Ø¨Ø§Ø´Ø¯</span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <button class="btn btn-primary w-100" onclick="uploadContacts()" id="uploadBtn">
                                        <i class="fas fa-upload me-2"></i>Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„
                                    </button>
                                </div>
                                
                                <div id="fileInfo" class="alert alert-info" style="display: none;">
                                    <i class="fas fa-file me-2"></i>
                                    <span id="fileName">---</span>
                                    <span id="fileSize" class="ms-2"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-users me-2"></i>Ù„ÛŒØ³Øª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</span>
                                <div>
                                    <span class="badge bg-primary" id="contactsTotal">0</span>
                                    <button class="btn btn-sm btn-danger ms-2" onclick="deleteSelectedContacts()">
                                        <i class="fas fa-trash me-1"></i>Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨â€ŒÙ‡Ø§
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-container">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th width="50">
                                                    <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                                                </th>
                                                <th width="80">Ø±Ø¯ÛŒÙ</th>
                                                <th>Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±</th>
                                                <th width="120">Ù…Ù†Ø¨Ø¹</th>
                                                <th width="120">ØªØ§Ø±ÛŒØ® Ø§ÙØ²ÙˆØ¯Ù†</th>
                                                <th width="80">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                            </tr>
                                        </thead>
                                        <tbody id="contactsTable">
                                            <tr>
                                                <td colspan="6" class="text-center py-5">
                                                    <i class="fas fa-users fa-2x mb-3 text-muted"></i>
                                                    <p class="text-muted">Ù‡ÛŒÚ† Ù…Ø®Ø§Ø·Ø¨ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                                                    <button class="btn btn-sm btn-outline-primary" onclick="document.getElementById('fileInput').click()">
                                                        <i class="fas fa-plus me-1"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø®Ø§Ø·Ø¨
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div>
                                        <span class="text-muted" id="selectedCount">0 Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="loadContacts()">
                                            <i class="fas fa-sync-alt me-1"></i>Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… -->
            <div class="tab-pane fade" id="send" role="tabpanel">
                <div class="row fade-in">
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-cogs me-2"></i>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø±Ø³Ø§Ù„
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="sendType" class="form-label required">Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„</label>
                                    <select class="form-select" id="sendType" onchange="updateSendType()">
                                        <option value="excel">Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ù…Ø®Ø§Ø·Ø¨Ø§Ù† ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„</option>
                                        <option value="group_message">Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÛŒÙˆØ²Ø±Ù‡Ø§ÛŒ ÛŒÚ© Ù¾ÛŒØ§Ù… Ú¯Ø±ÙˆÙ‡</option>
                                        <option value="test">ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ (Û± Ù…Ø®Ø§Ø·Ø¨)</option>
                                    </select>
                                </div>
                                
                                <!-- Ø¨Ø®Ø´ ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„ -->
                                <div id="excelSection" class="mb-3">
                                    <label class="form-label">ÙØ§ÛŒÙ„ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</label>
                                    <div class="input-group mb-2">
                                        <input type="file" class="form-control" id="excelFile" accept=".xlsx,.xls,.csv" style="display: none;">
                                        <button class="btn btn-outline-secondary w-100" type="button" onclick="document.getElementById('excelFile').click()">
                                            <i class="fas fa-file-excel me-2"></i>Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„
                                        </button>
                                    </div>
                                    <div id="excelFileName" class="form-text">Ù‡ÛŒÚ† ÙØ§ÛŒÙ„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>
                                </div>
                                
                                <!-- Ø¨Ø®Ø´ Ú¯Ø±ÙˆÙ‡ -->
                                <div id="groupSection" class="mb-3" style="display: none;">
                                    <div class="mb-3">
                                        <label for="groupName" class="form-label required">Ù†Ø§Ù… Ú¯Ø±ÙˆÙ‡</label>
                                        <input type="text" class="form-control" id="groupName" placeholder="Ù†Ø§Ù… Ú¯Ø±ÙˆÙ‡ Ø¯Ø± Ø§ÛŒØªØ§">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="messagePrefix" class="form-label required">Ù¾ÛŒØ´ÙˆÙ†Ø¯ Ù¾ÛŒØ§Ù… Ù‡Ø¯Ù</label>
                                        <input type="text" class="form-control" id="messagePrefix" placeholder="Ù…Ø§Ú˜ÛŒÚ©_Ø³Ø§Ø¹Øª">
                                        <div class="form-text">Ø±Ø¨Ø§Øª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø­Ø§ÙˆÛŒ Ø§ÛŒÙ† Ù¾ÛŒØ´ÙˆÙ†Ø¯ Ø±Ø§ Ø¯Ø± Ú¯Ø±ÙˆÙ‡ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="messageToSend" class="form-label required">Ù…ØªÙ† Ù¾ÛŒØ§Ù…</label>
                                    <textarea class="form-control" id="messageToSend" rows="4" 
                                              placeholder="Ù…ØªÙ† Ù¾ÛŒØ§Ù…ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯...">Ø³Ù„Ø§Ù… [Ù†Ø§Ù…] Ø¹Ø²ÛŒØ²ØŒ
Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… ØªØ³Øª Ø§Ø² Ø·Ø±Ù Ø±Ø¨Ø§Øª Ø§ÛŒØªØ§ Ø§Ø³Øª.
Ø¨Ø§ ØªØ´Ú©Ø±</textarea>
                                    <div class="form-text">Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² [Ù†Ø§Ù…] Ø¯Ø± Ù…ØªÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø§Ø±Ø³Ø§Ù„â€ŒÙ‡Ø§ (Ø«Ø§Ù†ÛŒÙ‡)</label>
                                    <div class="row g-2">
                                        <div class="col">
                                            <input type="number" class="form-control" id="minDelay" min="1" max="10" step="0.5" value="2.0" placeholder="Ø­Ø¯Ø§Ù‚Ù„">
                                        </div>
                                        <div class="col-auto align-self-center">ØªØ§</div>
                                        <div class="col">
                                            <input type="number" class="form-control" id="maxDelay" min="2" max="15" step="0.5" value="5.0" placeholder="Ø­Ø¯Ø§Ú©Ø«Ø±">
                                        </div>
                                    </div>
                                    <div class="form-text">Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªØ´Ø®ÛŒØµ Ø±Ø¨Ø§ØªØŒ Ø¨ÛŒÙ† Û² ØªØ§ Ûµ Ø«Ø§Ù†ÛŒÙ‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª</div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button class="btn btn-success" onclick="startSending()" id="sendBtn">
                                        <i class="fas fa-play me-2"></i>Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„
                                    </button>
                                    <button class="btn btn-warning" onclick="testSend()">
                                        <i class="fas fa-vial me-2"></i>ØªØ³Øª Ø§Ø±Ø³Ø§Ù„
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 mb-4">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-line me-2"></i>Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø§Ø±Ø³Ø§Ù„
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Ù¾ÛŒØ´Ø±ÙØª Ø§Ø±Ø³Ø§Ù„</span>
                                        <span id="progressText">0%</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="row text-center mb-3">
                                    <div class="col">
                                        <div class="p-3 bg-light rounded">
                                            <div class="fw-bold fs-4" id="sentCount">0</div>
                                            <small class="text-muted">Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-3 bg-light rounded">
                                            <div class="fw-bold fs-4 text-success" id="successCount">0</div>
                                            <small class="text-muted">Ù…ÙˆÙÙ‚</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-3 bg-light rounded">
                                            <div class="fw-bold fs-4 text-danger" id="errorCount">0</div>
                                            <small class="text-muted">Ø®Ø·Ø§</small>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="p-3 bg-light rounded">
                                            <div class="fw-bold fs-4" id="remainingCount">0</div>
                                            <small class="text-muted">Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button class="btn btn-danger" onclick="stopSending()" id="stopBtn" disabled>
                                        <i class="fas fa-stop me-2"></i>ØªÙˆÙ‚Ù Ø§Ø±Ø³Ø§Ù„
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-terminal me-2"></i>Ù„Ø§Ú¯ Ø§Ø±Ø³Ø§Ù„ Ø²Ù†Ø¯Ù‡</span>
                                <div>
                                    <button class="btn btn-sm btn-outline-secondary me-2" onclick="clearSendLog()">
                                        <i class="fas fa-trash me-1"></i>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
                                    </button>
                                    <button class="btn btn-sm btn-outline-info" onclick="refreshSendStatus()">
                                        <i class="fas fa-sync-alt me-1"></i>Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                                    </button>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="log-container" id="sendLog">
                                    <div class="log-entry log-info">Ù…Ù†ØªØ¸Ø± Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ -->
            <div class="tab-pane fade" id="reports" role="tabpanel">
                <div class="row fade-in">
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-chart-bar me-2"></i>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„</span>
                                <div class="d-flex gap-2">
                                    <input type="date" class="form-control form-control-sm" id="startDate" style="width: 140px;">
                                    <input type="date" class="form-control form-control-sm" id="endDate" style="width: 140px;">
                                    <button class="btn btn-sm btn-primary" onclick="filterReports()">
                                        <i class="fas fa-filter me-1"></i>ÙÛŒÙ„ØªØ±
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" onclick="loadReports()">
                                        <i class="fas fa-sync-alt me-1"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-container">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>ØªØ§Ø±ÛŒØ®</th>
                                                <th>Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</th>
                                                <th>Ù…ÙˆÙÙ‚</th>
                                                <th>Ø®Ø·Ø§</th>
                                                <th>Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª</th>
                                                <th>Ù…Ø¯Øª Ø²Ù…Ø§Ù†</th>
                                                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                            </tr>
                                        </thead>
                                        <tbody id="reportsTable">
                                            <tr>
                                                <td colspan="7" class="text-center py-5">
                                                    <i class="fas fa-chart-line fa-2x mb-3 text-muted"></i>
                                                    <p class="text-muted">Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="row mt-4">
                                    <div class="col-md-3">
                                        <div class="alert alert-success">
                                            <h6>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚ÛŒØª</h6>
                                            <h4 id="avgSuccessRate">0%</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="alert alert-info">
                                            <h6>Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</h6>
                                            <h4 id="totalReportsCount">0</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="alert alert-warning">
                                            <h6>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù†</h6>
                                            <h4 id="avgDuration">0 Ø¯Ù‚ÛŒÙ‚Ù‡</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="alert alert-light">
                                            <h6>Ø¢Ø®Ø±ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´</h6>
                                            <h4 id="lastReportDate">---</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
            <div class="tab-pane fade" id="settings" role="tabpanel">
                <div class="row fade-in">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-sliders-h me-2"></i>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ
                            </div>
                            <div class="card-body">
                                <form id="settingsForm">
                                    <div class="mb-3">
                                        <label for="defaultMessage" class="form-label">Ù¾ÛŒØ§Ù… Ù¾ÛŒØ´â€ŒÙØ±Ø¶</label>
                                        <textarea class="form-control" id="defaultMessage" rows="5">Ø³Ù„Ø§Ù… [Ù†Ø§Ù…] Ø¹Ø²ÛŒØ²ØŒ
Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø§Ø² Ø·Ø±Ù [Ø³Ø§Ø²Ù…Ø§Ù†] Ø§Ø³Øª.
Ø¨Ø§ ØªØ´Ú©Ø±</textarea>
                                        <div class="form-text">Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² [Ù†Ø§Ù…] Ùˆ [Ø³Ø§Ø²Ù…Ø§Ù†] Ø¯Ø± Ù…ØªÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultMinDelay" class="form-label">Ø­Ø¯Ø§Ù‚Ù„ ØªØ§Ø®ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ (Ø«Ø§Ù†ÛŒÙ‡)</label>
                                        <input type="number" class="form-control" id="defaultMinDelay" min="1" max="10" step="0.5" value="2.0">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="defaultMaxDelay" class="form-label">Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ§Ø®ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ (Ø«Ø§Ù†ÛŒÙ‡)</label>
                                        <input type="number" class="form-control" id="defaultMaxDelay" min="2" max="15" step="0.5" value="5.0">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="maxPerHour" class="form-label">Ø­Ø¯Ø§Ú©Ø«Ø± Ù¾ÛŒØ§Ù… Ø¯Ø± Ø³Ø§Ø¹Øª</label>
                                        <input type="number" class="form-control" id="maxPerHour" min="10" max="500" value="100">
                                        <div class="form-text">Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø§ÛŒØªØ§</div>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="autoSaveSettings" checked>
                                        <label class="form-check-label" for="autoSaveSettings">Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª</label>
                                    </div>
                                    
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-primary" onclick="saveSettings()">
                                            <i class="fas fa-save me-2"></i>Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                                        </button>
                                        <button type="button" class="btn btn-secondary" onclick="loadSettings()">
                                            <i class="fas fa-sync-alt me-2"></i>Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-server me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆØ±</label>
                                    <div class="alert alert-success">
                                        <i class="fas fa-check-circle me-2"></i>
                                        <span>Ø³Ø±ÙˆØ± ÙØ¹Ø§Ù„ Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ù‡ Ú©Ø§Ø±</span>
                                        <span class="float-end" id="serverPort">Ù¾ÙˆØ±Øª: 5000</span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ÙˆØ¶Ø¹ÛŒØª Ù¾ÙˆØ±Øª</label>
                                    <div class="alert alert-info">
                                        <i class="fas fa-plug me-2"></i>
                                        <span>Ù¾ÙˆØ±Øª 5000 Ø¯Ø± Ø­Ø§Ù„ Ø´Ù†ÙˆØ¯</span>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ÙØ¶Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ</label>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar" id="storageProgressBar" style="width: 25%"></div>
                                    </div>
                                    <div class="text-center small text-muted" id="storageText">25% Ø§Ø² 100MB Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ…</label>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="p-2 bg-light rounded">
                                                <small class="text-muted">Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</small>
                                                <div class="fw-bold" id="activeBotsCount">0</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="p-2 bg-light rounded">
                                                <small class="text-muted">Ù†Ø´Ø³Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</small>
                                                <div class="fw-bold" id="activeSessionsCount">0</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="p-2 bg-light rounded">
                                                <small class="text-muted">Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</small>
                                                <div class="fw-bold" id="systemContactsCount">0</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="p-2 bg-light rounded">
                                                <small class="text-muted">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</small>
                                                <div class="fw-bold" id="reportsCount">0</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <button class="btn btn-outline-danger w-100 mb-2" onclick="clearAllData()">
                                        <i class="fas fa-trash-alt me-2"></i>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                                    </button>
                                    <div class="form-text text-danger text-center">Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª!</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÙÙˆØªØ± -->
    <footer class="bg-dark text-white mt-5">
        <div class="container py-4">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="mb-3">ğŸ¤– Ø±Ø¨Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø§ÛŒØªØ§</h5>
                    <p class="text-muted">Ù†Ø³Ø®Ù‡ ØªØ­Øª ÙˆØ¨ - ØªÙˆØ³Ø¹Ù‡ ÛŒØ§ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¢Ø³Ø§Ù† Ùˆ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†ØµØ¨ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±</p>
                </div>
                <div class="col-lg-4 mb-4">
                    <h5 class="mb-3">Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-light" onclick="switchToTab('dashboard')"><i class="fas fa-arrow-left me-2"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a></li>
                        <li class="mb-2"><a href="#" class="text-light" onclick="switchToTab('send')"><i class="fas fa-arrow-left me-2"></i> Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„</a></li>
                        <li class="mb-2"><a href="#" class="text-light" onclick="switchToTab('settings')"><i class="fas fa-arrow-left me-2"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª</a></li>
                        <li><a href="#" class="text-light" onclick="showHelp()"><i class="fas fa-arrow-left me-2"></i> Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 mb-4">
                    <h5 class="mb-3">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</h5>
                    <p class="text-muted">Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù‡Ø± Ø¨Ø®Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p>
                    <div class="mt-3">
                        <a href="#" class="text-light me-3"><i class="fab fa-github fa-lg"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-telegram fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fas fa-envelope fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr class="bg-secondary my-4">
            <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
                <div class="mb-2 mb-md-0">
                    Â© Û±Û´Û°Û³ - ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª | <span id="appVersion">Ù†Ø³Ø®Ù‡ Û±.Û°.Û°</span>
                </div>
                <div class="text-muted small">
                    <i class="fas fa-code me-1"></i> ØªÙˆØ³Ø¹Ù‡ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§ Flask Ùˆ Playwright
                </div>
            </div>
        </div>
    </footer>

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==================== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ ====================
        const API_BASE_URL = 'http://localhost:5000/api';
        let currentBotId = null;
        let isSending = false;
        let isLoggedIn = false;
        let sendStats = { total: 0, sent: 0, success: 0, error: 0 };
        let progressInterval = null;
        let statusInterval = null;
        let selectedContacts = new Set();
        let currentSettings = {};
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ ====================
        
        function switchToTab(tabName) {
            const tab = document.querySelector(`[data-bs-target="#${tabName}"]`);
            if (tab) {
                bootstrap.Tab.getOrCreateInstance(tab).show();
            }
        }
        
        function showNotification(message, type = 'info', duration = 5000) {
            const types = {
                'success': { class: 'notification-success', icon: 'check-circle' },
                'error': { class: 'notification-error', icon: 'exclamation-circle' },
                'warning': { class: 'notification-warning', icon: 'exclamation-triangle' },
                'info': { class: 'notification-info', icon: 'info-circle' }
            };
            
            const config = types[type] || types.info;
            
            const notification = document.createElement('div');
            notification.className = `notification ${config.class}`;
            notification.innerHTML = `
                <div>
                    <i class="fas fa-${config.icon} me-2"></i>
                    ${message}
                </div>
                <button class="btn btn-sm btn-link text-light p-0" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, duration);
        }
        
        function addToLog(message, type = 'info', containerId = 'systemLog') {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.innerHTML = `<span class="text-muted">[${timestamp}]</span> ${message}`;
            
            container.appendChild(entry);
            container.scrollTop = container.scrollHeight;
        }
        
        function clearLog(containerId = 'systemLog') {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `<div class="log-entry log-info">Ù„Ø§Ú¯ Ù¾Ø§Ú© Ø´Ø¯</div>`;
            }
        }
        
        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø¨Ø§Øª ====================
        
        async function createBotInstance() {
            try {
                const response = await fetch(`${API_BASE_URL}/bot/create`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentBotId = data.bot_id;
                    showNotification('Ø±Ø¨Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯', 'success');
                    addToLog(`Ø±Ø¨Ø§Øª ${currentBotId} Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯`, 'success');
                    
                    // Ø¢Ù¾Ø¯ÛŒØª UI
                    document.getElementById('currentBotId').textContent = currentBotId;
                    document.getElementById('botStatusText').textContent = 'Ø¢Ù…Ø§Ø¯Ù‡';
                    document.getElementById('botStatusText').className = 'badge bg-success';
                    document.getElementById('botCreatedAt').textContent = new Date().toLocaleTimeString('fa-IR');
                    document.getElementById('botInfo').style.display = 'block';
                    document.getElementById('noBotInfo').style.display = 'none';
                    
                    return true;
                } else {
                    showNotification(data.error || 'Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø±Ø¨Ø§Øª', 'error');
                    return false;
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø±Ø¨Ø§Øª:', error);
                return false;
            }
        }
        
        async function startLogin() {
            const phone = document.getElementById('phoneNumber').value.trim();
            
            if (!phone.match(/^09\d{9}$/)) {
                showNotification('Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ 09 Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯ Ùˆ 11 Ø±Ù‚Ù…ÛŒ Ø¨Ø§Ø´Ø¯', 'error');
                return;
            }
            
            if (!currentBotId) {
                const created = await createBotInstance();
                if (!created) return;
            }
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone_number: phone })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    if (data.status === 'waiting_for_code') {
                        showNotification('Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¢Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.', 'info');
                        document.getElementById('codeEntrySection').style.display = 'block';
                        document.getElementById('loginStatus').innerHTML = `
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-mobile-alt me-2"></i>
                                Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.
                            </div>
                        `;
                        addToLog(`Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø¨Ø±Ø§ÛŒ ${phone} Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯`, 'info');
                    } else if (data.status === 'success') {
                        showNotification('Ø´Ù…Ø§ Ø§Ø² Ù‚Ø¨Ù„ Ù„Ø§Ú¯ÛŒÙ† Ù‡Ø³ØªÛŒØ¯', 'success');
                        updateLoginStatus(true);
                    }
                } else {
                    showNotification(data.error || 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯', 'error');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ù„Ø§Ú¯ÛŒÙ†:', error);
            } finally {
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt me-2"></i>Ø´Ø±ÙˆØ¹ Ù„Ø§Ú¯ÛŒÙ†';
            }
        }
        
        async function submitCode() {
            if (!currentBotId) {
                showNotification('Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.', 'error');
                return;
            }
            
            const submitBtn = document.getElementById('submitCodeBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ ØªØ£ÛŒÛŒØ¯ ÙˆØ±ÙˆØ¯ Ø´Ù…Ø§...';
            
            try {
                // Ù¾Ø§Ø±Ø§Ù…ØªØ± Ú©Ø¯ Ø¯ÛŒÚ¯Ø± Ø§Ù‡Ù…ÛŒØªÛŒ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø§Ù…Ø§ API Ù…Ù†ØªØ¸Ø± Ø¢Ù† Ø§Ø³Øª
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/submit-code`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code: "manual" }) // ÛŒÚ© Ù…Ù‚Ø¯Ø§Ø± Ø³Ø§Ø®ØªÚ¯ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                });
                
                const data = await response.json();
                
                if (response.ok && data.status === 'success') {
                    showNotification('ÙˆØ±ÙˆØ¯ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ£ÛŒÛŒØ¯ Ø´Ø¯!', 'success');
                    document.getElementById('codeEntrySection').style.display = 'none';
                    document.getElementById('loginStatus').innerHTML = `
                        <div class="alert alert-success mt-3">
                            <i class="fas fa-check-circle me-2"></i>
                            ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²! Ø§Ú©Ù†ÙˆÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯.
                        </div>
                    `;
                    updateLoginStatus(true);
                    addToLog('ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ£ÛŒÛŒØ¯ Ø´Ø¯', 'success');
                } else {
                    showNotification(data.error || 'ØªØ£ÛŒÛŒØ¯ ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ø¢ÛŒØ§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ', 'error');
                    addToLog(data.error || 'Ø®Ø·Ø§ Ø¯Ø± ØªØ£ÛŒÛŒØ¯ ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ', 'error');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± Ù‡Ù†Ú¯Ø§Ù… ØªØ£ÛŒÛŒØ¯ ÙˆØ±ÙˆØ¯.', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± ØªØ£ÛŒÛŒØ¯ Ú©Ø¯:', error);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-check-double me-2"></i>ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù…';
            }
        }
        
        async function logout() {
            if (!currentBotId) return;
            
            if (!confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ø­Ø³Ø§Ø¨ Ø§ÛŒØªØ§ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/close`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    showNotification('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'info');
                    updateLoginStatus(false);
                    currentBotId = null;
                    addToLog('Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ø­Ø³Ø§Ø¨ Ø®Ø§Ø±Ø¬ Ø´Ø¯', 'info');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø®Ø±ÙˆØ¬', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø®Ø±ÙˆØ¬:', error);
            }
        }
        
        function updateLoginStatus(loggedIn) {
            isLoggedIn = loggedIn;
            
            if (loggedIn) {
                document.getElementById('logoutBtn').style.display = 'block';
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('sessionStatus').innerHTML = `
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle me-2"></i>
                        ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯
                    </div>
                `;
                document.getElementById('sendBtn').disabled = false;
            } else {
                document.getElementById('logoutBtn').style.display = 'none';
                document.getElementById('loginBtn').style.display = 'block';
                document.getElementById('sessionStatus').innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-times-circle me-2"></i>
                        ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯
                    </div>
                `;
                document.getElementById('sendBtn').disabled = true;
                document.getElementById('botInfo').style.display = 'none';
                document.getElementById('noBotInfo').style.display = 'block';
            }
        }
        
        async function checkBotStatus() {
            if (!currentBotId) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/status`);
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.is_logged_in && !isLoggedIn) {
                        updateLoginStatus(true);
                    }
                    
                    // Ù†Ù…Ø§ÛŒØ´ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
                    if (data.logs && data.logs.length > 0) {
                        data.logs.forEach(log => {
                            if (log.includes('âœ…')) {
                                addToLog(log, 'success');
                            } else if (log.includes('âŒ')) {
                                addToLog(log, 'error');
                            } else {
                                addToLog(log, 'info');
                            }
                        });
                    }
                }
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø±Ø¨Ø§Øª:', error);
            }
        }
        
        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ† ====================
        
        function dragOver(e) {
            e.preventDefault();
            e.stopPropagation();
            e.target.classList.add('dragover');
        }
        
        function dragLeave(e) {
            e.preventDefault();
            e.stopPropagation();
            e.target.classList.remove('dragover');
        }
        
        function dropFile(e) {
            e.preventDefault();
            e.stopPropagation();
            e.target.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelect({ files: files });
            }
        }
        
        function handleFileSelect(input) {
            const file = input.files[0];
            if (!file) return;
            
            const fileName = file.name;
            const fileSize = (file.size / 1024).toFixed(1);
            
            document.getElementById('fileName').textContent = fileName;
            document.getElementById('fileSize').textContent = `(${fileSize} KB)`;
            document.getElementById('fileInfo').style.display = 'block';
            
            // Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØªØ¨ Ø§Ø±Ø³Ø§Ù„
            document.getElementById('excelFileName').textContent = fileName;
        }
        
        async function uploadContacts() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files[0]) {
                showNotification('Ù„Ø·ÙØ§Ù‹ ÙØ§ÛŒÙ„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            
            const uploadBtn = document.getElementById('uploadBtn');
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '<span class="loading"></span> Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù¾Ù„ÙˆØ¯...';
            
            try {
                const response = await fetch(`${API_BASE_URL}/contacts/upload`, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification(data.message || `${data.count} Ù…Ø®Ø§Ø·Ø¨ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`, 'success');
                    loadContacts();
                    document.getElementById('contactsCount').textContent = data.count;
                    document.getElementById('contactsTotal').textContent = data.count;
                    addToLog(`${data.count} Ù…Ø®Ø§Ø·Ø¨ Ø§Ø² ÙØ§ÛŒÙ„ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`, 'success');
                } else {
                    showNotification(data.error || 'Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„', 'error');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯:', error);
            } finally {
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = '<i class="fas fa-upload me-2"></i>Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„';
            }
        }
        
        async function loadContacts() {
            try {
                const response = await fetch(`${API_BASE_URL}/contacts`);
                const data = await response.json();
                
                if (response.ok) {
                    const tableBody = document.getElementById('contactsTable');
                    tableBody.innerHTML = '';
                    
                    if (data.contacts && data.contacts.length > 0) {
                        data.contacts.forEach((contact, index) => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>
                                    <input type="checkbox" class="contact-checkbox" 
                                           value="${contact.id}" onchange="toggleContactSelection(${contact.id})">
                                </td>
                                <td>${index + 1}</td>
                                <td>${contact.user_id}</td>
                                <td><span class="badge bg-secondary">${contact.source}</span></td>
                                <td class="text-muted small">${contact.added_date}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteContact(${contact.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            `;
                            tableBody.appendChild(row);
                        });
                        
                        document.getElementById('contactsTotal').textContent = data.count;
                        document.getElementById('systemContactsCount').textContent = data.count;
                    } else {
                        tableBody.innerHTML = `
                            <tr>
                                <td colspan="6" class="text-center py-5">
                                    <i class="fas fa-users fa-2x mb-3 text-muted"></i>
                                    <p class="text-muted">Ù‡ÛŒÚ† Ù…Ø®Ø§Ø·Ø¨ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                                    <button class="btn btn-sm btn-outline-primary" onclick="document.getElementById('fileInput').click()">
                                        <i class="fas fa-plus me-1"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø®Ø§Ø·Ø¨
                                    </button>
                                </td>
                            </tr>
                        `;
                    }
                    
                    updateSelectedCount();
                }
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†:', error);
            }
        }
        
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.contact-checkbox');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
                toggleContactSelection(parseInt(checkbox.value));
            });
            
            updateSelectedCount();
        }
        
        function toggleContactSelection(id) {
            const checkbox = document.querySelector(`.contact-checkbox[value="${id}"]`);
            
            if (checkbox.checked) {
                selectedContacts.add(id);
            } else {
                selectedContacts.delete(id);
                document.getElementById('selectAll').checked = false;
            }
            
            updateSelectedCount();
        }
        
        function updateSelectedCount() {
            const count = selectedContacts.size;
            document.getElementById('selectedCount').textContent = `${count} Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡`;
        }
        
        async function deleteContact(id) {
            if (!confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ù…Ø®Ø§Ø·Ø¨ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/contacts`, {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ids: [id] })
                });
                
                if (response.ok) {
                    showNotification('Ù…Ø®Ø§Ø·Ø¨ Ø­Ø°Ù Ø´Ø¯', 'success');
                    loadContacts();
                    addToLog(`Ù…Ø®Ø§Ø·Ø¨ ${id} Ø­Ø°Ù Ø´Ø¯`, 'info');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø®Ø§Ø·Ø¨', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø®Ø§Ø·Ø¨:', error);
            }
        }
        
        async function deleteSelectedContacts() {
            const ids = Array.from(selectedContacts);
            
            if (ids.length === 0) {
                showNotification('Ù‡ÛŒÚ† Ù…Ø®Ø§Ø·Ø¨ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª', 'warning');
                return;
            }
            
            if (!confirm(`Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ${ids.length} Ù…Ø®Ø§Ø·Ø¨ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ`)) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/contacts`, {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ids: ids })
                });
                
                if (response.ok) {
                    showNotification(`${ids.length} Ù…Ø®Ø§Ø·Ø¨ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯`, 'success');
                    selectedContacts.clear();
                    loadContacts();
                    addToLog(`${ids.length} Ù…Ø®Ø§Ø·Ø¨ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯`, 'info');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø®Ø§Ø·Ø¨Ø§Ù†', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø®Ø§Ø·Ø¨Ø§Ù†:', error);
            }
        }
        
        // ==================== Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ====================
        
        function updateSendType() {
            const type = document.getElementById('sendType').value;
            const excelSection = document.getElementById('excelSection');
            const groupSection = document.getElementById('groupSection');
            
            if (type === 'excel' || type === 'test') {
                excelSection.style.display = 'block';
                groupSection.style.display = 'none';
            } else if (type === 'group_message') {
                excelSection.style.display = 'none';
                groupSection.style.display = 'block';
            }
        }
        
        async function startSending() {
            if (!currentBotId) {
                const created = await createBotInstance();
                if (!created) return;
            }
            
            if (!isLoggedIn) {
                showNotification('Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error');
                switchToTab('login');
                return;
            }
            
            const message = document.getElementById('messageToSend').value.trim();
            if (!message) {
                showNotification('Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const type = document.getElementById('sendType').value;
            const minDelay = parseFloat(document.getElementById('minDelay').value) || 2.0;
            const maxDelay = parseFloat(document.getElementById('maxDelay').value) || 5.0;
            
            const sendData = {
                type: type,
                message: message,
                min_delay: minDelay,
                max_delay: maxDelay
            };
            
            if (type === 'excel') {
                const fileInput = document.getElementById('excelFile');
                if (fileInput.files[0]) {
                    // Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯
                    const formData = new FormData();
                    formData.append('file', fileInput.files[0]);
                    
                    try {
                        const uploadResponse = await fetch(`${API_BASE_URL}/contacts/upload`, {
                            method: 'POST',
                            body: formData
                        });
                        
                        const uploadData = await uploadResponse.json();
                        if (uploadResponse.ok) {
                            sendData.excel_path = uploadData.filepath;
                        }
                    } catch (error) {
                        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„:', error);
                    }
                }
            } else if (type === 'group_message') {
                const groupName = document.getElementById('groupName').value.trim();
                const messagePrefix = document.getElementById('messagePrefix').value.trim();
                
                if (!groupName || !messagePrefix) {
                    showNotification('Ù†Ø§Ù… Ú¯Ø±ÙˆÙ‡ Ùˆ Ù¾ÛŒØ´ÙˆÙ†Ø¯ Ù¾ÛŒØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                    return;
                }
                
                sendData.group_name = groupName;
                sendData.message_prefix = messagePrefix;
            } else if (type === 'test') {
                sendData.type = 'excel';
                sendData.excel_path = '';
            }
            
            const sendBtn = document.getElementById('sendBtn');
            const stopBtn = document.getElementById('stopBtn');
            
            sendBtn.disabled = true;
            stopBtn.disabled = false;
            isSending = true;
            
            addToLog('Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø§Ø±Ø³Ø§Ù„...', 'info', 'sendLog');
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/send`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(sendData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification(`Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ${data.total} Ú©Ø§Ø±Ø¨Ø± Ø´Ø±ÙˆØ¹ Ø´Ø¯`, 'success');
                    addToLog(`Ø§Ø±Ø³Ø§Ù„ ${data.total} Ù¾ÛŒØ§Ù… Ø´Ø±ÙˆØ¹ Ø´Ø¯`, 'success', 'sendLog');
                    
                    // Ø´Ø±ÙˆØ¹ Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ù¾ÛŒØ´Ø±ÙØª
                    startMonitoringProgress();
                } else {
                    showNotification(data.error || 'Ø®Ø·Ø§ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„', 'error');
                    sendBtn.disabled = false;
                    stopBtn.disabled = true;
                    isSending = false;
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„:', error);
                sendBtn.disabled = false;
                stopBtn.disabled = true;
                isSending = false;
            }
        }
        
        async function testSend() {
            if (!currentBotId) {
                const created = await createBotInstance();
                if (!created) return;
            }
            
            if (!isLoggedIn) {
                showNotification('Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error');
                switchToTab('login');
                return;
            }
            
            const message = document.getElementById('messageToSend').value.trim() || 'ØªØ³Øª Ø±Ø¨Ø§Øª Ø§ÛŒØªØ§';
            
            addToLog('Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§Ø±Ø³Ø§Ù„...', 'info', 'sendLog');
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/send-test`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: '@test',
                        message: message
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification('ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
                    addToLog('ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙÙ‚', 'success', 'sendLog');
                } else {
                    showNotification(data.error || 'Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª Ø§Ø±Ø³Ø§Ù„', 'error');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª Ø§Ø±Ø³Ø§Ù„:', error);
            }
        }
        
        function startMonitoringProgress() {
            if (progressInterval) clearInterval(progressInterval);
            
            progressInterval = setInterval(async () => {
                if (!currentBotId || !isSending) {
                    clearInterval(progressInterval);
                    return;
                }
                
                try {
                    const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/send/status`);
                    if (response.ok) {
                        const stats = await response.json();
                        updateProgressUI(stats);
                        
                        if (!stats.is_running) {
                            clearInterval(progressInterval);
                            document.getElementById('sendBtn').disabled = false;
                            document.getElementById('stopBtn').disabled = true;
                            isSending = false;
                            showNotification('Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ù…Ù„ Ø´Ø¯', 'success');
                            addToLog('Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ù…Ù„ Ø´Ø¯', 'success', 'sendLog');
                        }
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª:', error);
                }
            }, 2000);
        }
        
        function updateProgressUI(stats) {
            const progress = stats.total > 0 ? Math.round((stats.sent / stats.total) * 100) : 0;
            
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${progress}%`;
            
            document.getElementById('sentCount').textContent = stats.sent;
            document.getElementById('successCount').textContent = stats.success;
            document.getElementById('errorCount').textContent = stats.error;
            document.getElementById('remainingCount').textContent = stats.total - stats.sent;
            
            // Ù†Ù…Ø§ÛŒØ´ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
            if (stats.logs && stats.logs.length > 0) {
                const existingLogs = Array.from(document.querySelectorAll('#sendLog .log-entry')).map(el => el.textContent);
                
                stats.logs.slice(-5).forEach(log => {
                    if (!existingLogs.includes(log) && !log.includes('Sending process')) {
                        if (log.includes('âœ…')) {
                            addToLog(log, 'success', 'sendLog');
                        } else if (log.includes('âŒ')) {
                            addToLog(log, 'error', 'sendLog');
                        } else {
                            addToLog(log, 'info', 'sendLog');
                        }
                    }
                });
            }
        }
        
        async function stopSending() {
            if (!currentBotId || !isSending) return;
            
            if (!confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒØ¯ØŸ')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/bot/${currentBotId}/send/stop`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    showNotification('Ø§Ø±Ø³Ø§Ù„ Ù…ØªÙˆÙ‚Ù Ø´Ø¯', 'warning');
                    addToLog('Ø§Ø±Ø³Ø§Ù„ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø± Ù…ØªÙˆÙ‚Ù Ø´Ø¯', 'warning', 'sendLog');
                    
                    document.getElementById('sendBtn').disabled = false;
                    document.getElementById('stopBtn').disabled = true;
                    isSending = false;
                    
                    if (progressInterval) {
                        clearInterval(progressInterval);
                    }
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ‚Ù Ø§Ø±Ø³Ø§Ù„', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± ØªÙˆÙ‚Ù Ø§Ø±Ø³Ø§Ù„:', error);
            }
        }
        
        function refreshSendStatus() {
            if (currentBotId && isSending) {
                fetch(`${API_BASE_URL}/bot/${currentBotId}/send/status`)
                    .then(response => response.ok ? response.json() : null)
                    .then(stats => {
                        if (stats) updateProgressUI(stats);
                    })
                    .catch(console.error);
            }
        }
        
        function clearSendLog() {
            clearLog('sendLog');
        }
        
        // ==================== Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ ====================
        
        async function loadReports() {
            try {
                const response = await fetch(`${API_BASE_URL}/reports`);
                const data = await response.json();
                
                if (response.ok) {
                    const tableBody = document.getElementById('reportsTable');
                    tableBody.innerHTML = '';
                    
                    if (data.reports && data.reports.length > 0) {
                        data.reports.forEach((report, index) => {
                            const successRate = report.total > 0 ? Math.round((report.success / report.total) * 100) : 0;
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${report.date}</td>
                                <td>${report.total}</td>
                                <td class="text-success">${report.success}</td>
                                <td class="text-danger">${report.errors}</td>
                                <td>
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar bg-success" style="width: ${successRate}%">
                                            ${successRate}%
                                        </div>
                                    </div>
                                </td>
                                <td>${report.duration}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-info" onclick="viewReportDetails(${report.id})">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            `;
                            tableBody.appendChild(row);
                        });
                        
                        // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
                        document.getElementById('totalMessages').textContent = data.summary.total_messages;
                        document.getElementById('successMessages').textContent = data.summary.success_messages;
                        document.getElementById('errorMessages').textContent = data.summary.error_messages;
                        document.getElementById('avgSuccessRate').textContent = data.summary.success_rate.toFixed(1) + '%';
                        document.getElementById('totalReportsCount').textContent = data.summary.total_messages;
                        document.getElementById('reportsCount').textContent = data.reports.length;
                        
                        if (data.reports.length > 0) {
                            document.getElementById('lastReportDate').textContent = data.reports[0].date;
                            
                            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù†
                            let totalMinutes = 0;
                            let count = 0;
                            data.reports.forEach(r => {
                                if (r.duration && r.duration.includes('Ø¯Ù‚ÛŒÙ‚Ù‡')) {
                                    const minutes = parseFloat(r.duration);
                                    if (!isNaN(minutes)) {
                                        totalMinutes += minutes;
                                        count++;
                                    }
                                }
                            });
                            
                            if (count > 0) {
                                document.getElementById('avgDuration').textContent = (totalMinutes / count).toFixed(1) + ' Ø¯Ù‚ÛŒÙ‚Ù‡';
                            }
                        }
                    } else {
                        tableBody.innerHTML = `
                            <tr>
                                <td colspan="7" class="text-center py-5">
                                    <i class="fas fa-chart-line fa-2x mb-3 text-muted"></i>
                                    <p class="text-muted">Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</p>
                                </td>
                            </tr>
                        `;
                    }
                }
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§:', error);
            }
        }
        
        function filterReports() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (startDate || endDate) {
                showNotification(`Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø§Ø² ${startDate} ØªØ§ ${endDate} ÙÛŒÙ„ØªØ± Ø´Ø¯Ù†Ø¯`, 'info');
                loadReports(); // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ØªØ§Ø±ÛŒØ® ÙÛŒÙ„ØªØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯
            } else {
                loadReports();
            }
        }
        
        function viewReportDetails(reportId) {
            showNotification(`Ù†Ù…Ø§ÛŒØ´ Ø¬Ø²Ø¦ÛŒØ§Øª Ú¯Ø²Ø§Ø±Ø´ ${reportId}`, 'info');
            // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ modal Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯
        }
        
        // ==================== ØªÙ†Ø¸ÛŒÙ…Ø§Øª ====================
        
        async function loadSettings() {
            try {
                const response = await fetch(`${API_BASE_URL}/settings`);
                const data = await response.json();
                
                if (response.ok) {
                    currentSettings = data.settings;
                    
                    document.getElementById('defaultMessage').value = currentSettings.default_message || '';
                    document.getElementById('defaultMinDelay').value = currentSettings.default_min_delay || '2.0';
                    document.getElementById('defaultMaxDelay').value = currentSettings.default_max_delay || '5.0';
                    document.getElementById('maxPerHour').value = currentSettings.max_per_hour || '100';
                    
                    showNotification('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', 'success');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:', error);
            }
        }
        
        async function saveSettings() {
            const settings = {
                default_message: document.getElementById('defaultMessage').value,
                default_min_delay: document.getElementById('defaultMinDelay').value,
                default_max_delay: document.getElementById('defaultMaxDelay').value,
                max_per_hour: document.getElementById('maxPerHour').value
            };
            
            try {
                const response = await fetch(`${API_BASE_URL}/settings`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(settings)
                });
                
                if (response.ok) {
                    showNotification('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
                    loadSettings();
                } else {
                    showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª', 'error');
                }
            } catch (error) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±', 'error');
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:', error);
            }
        }
        
        // ==================== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ… ====================
        
        async function refreshDashboard() {
            try {
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¢Ù…Ø§Ø±
                const reportsResponse = await fetch(`${API_BASE_URL}/reports`);
                if (reportsResponse.ok) {
                    const reportsData = await reportsResponse.json();
                    if (reportsData.summary) {
                        document.getElementById('totalMessages').textContent = reportsData.summary.total_messages.toLocaleString();
                        document.getElementById('successMessages').textContent = reportsData.summary.success_messages.toLocaleString();
                        document.getElementById('errorMessages').textContent = reportsData.summary.error_messages.toLocaleString();
                    }
                }
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†
                const contactsResponse = await fetch(`${API_BASE_URL}/contacts`);
                if (contactsResponse.ok) {
                    const contactsData = await contactsResponse.json();
                    document.getElementById('contactsCount').textContent = contactsData.count || 0;
                }
                
                // ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
                const systemResponse = await fetch(`${API_BASE_URL}/system/status`);
                if (systemResponse.ok) {
                    const systemData = await systemResponse.json();
                    
                    // Ø­Ø§ÙØ¸Ù‡
                    if (systemData.server.memory_usage) {
                        const memoryMB = systemData.server.memory_usage.toFixed(1);
                        document.getElementById('memoryUsage').textContent = `${memoryMB} MB`;
                        const memoryPercent = Math.min((memoryMB / 100) * 100, 100);
                        document.getElementById('memoryBar').style.width = `${memoryPercent}%`;
                    }
                    
                    // Ø¢Ù¾ØªØ§ÛŒÙ…
                    if (systemData.server.uptime) {
                        const hours = Math.floor(systemData.server.uptime / 3600);
                        const minutes = Math.floor((systemData.server.uptime % 3600) / 60);
                        document.getElementById('uptime').textContent = `Ø²Ù…Ø§Ù† ÙØ¹Ø§Ù„ÛŒØª: ${hours} Ø³Ø§Ø¹Øª Ùˆ ${minutes} Ø¯Ù‚ÛŒÙ‚Ù‡`;
                    }
                    
                    // Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
                    if (systemData.bots) {
                        const activeBots = systemData.bots.filter(bot => bot.is_logged_in).length;
                        document.getElementById('activeBotsCount').textContent = activeBots;
                        document.getElementById('activeSessionsCount').textContent = systemData.bots.length;
                    }
                }
                
                showNotification('Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯:', error);
            }
        }
        
        async function testBotConnection() {
            try {
                const response = await fetch(`${API_BASE_URL}/bot/create`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                if (response.ok) {
                    showNotification('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù…ÙˆÙÙ‚ Ø§Ø³Øª', 'success');
                    document.getElementById('connectionStatus').className = 'status-badge status-success';
                    document.getElementById('connectionStatus').innerHTML = '<i class="fas fa-wifi me-1"></i> Ù…ØªØµÙ„';
                } else {
                    showNotification('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù†Ø§Ù…ÙˆÙÙ‚', 'error');
                    document.getElementById('connectionStatus').className = 'status-badge status-error';
                    document.getElementById('connectionStatus').innerHTML = '<i class="fas fa-wifi-slash me-1"></i> Ù‚Ø·Ø¹';
                }
            } catch (error) {
                showNotification('Ø³Ø±ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª', 'error');
                document.getElementById('connectionStatus').className = 'status-badge status-error';
                document.getElementById('connectionStatus').innerHTML = '<i class="fas fa-wifi-slash me-1"></i> Ù‚Ø·Ø¹';
            }
        }
        
        function clearAllData() {
            if (!confirm('âš ï¸ Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ\nØ§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª!')) {
                return;
            }
            
            if (confirm('Ø§ÛŒÙ† Ú©Ø§Ø± ØªÙ…Ø§Ù… Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†ØŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØ¯ØŸ')) {
                // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ÛŒØ¯ endpoint Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø±Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ù†ÛŒØ¯
                showNotification('ØªÙ…Ø§Ù…ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'info');
                addToLog('ØªÙ…Ø§Ù…ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'warning');
                
                // Ø±ÛŒØ³Øª UI
                document.getElementById('totalMessages').textContent = '0';
                document.getElementById('successMessages').textContent = '0';
                document.getElementById('errorMessages').textContent = '0';
                document.getElementById('contactsCount').textContent = '0';
                document.getElementById('contactsTotal').textContent = '0';
                document.getElementById('systemContactsCount').textContent = '0';
                document.getElementById('reportsCount').textContent = '0';
                
                // Ø±ÛŒØ³Øª Ø¬Ø¯Ø§ÙˆÙ„
                document.getElementById('contactsTable').innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-5">
                            <i class="fas fa-users fa-2x mb-3 text-muted"></i>
                            <p class="text-muted">Ù‡ÛŒÚ† Ù…Ø®Ø§Ø·Ø¨ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                        </td>
                    </tr>
                `;
                
                document.getElementById('reportsTable').innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-5">
                            <i class="fas fa-chart-line fa-2x mb-3 text-muted"></i>
                            <p class="text-muted">Ù‡ÛŒÚ† Ú¯Ø²Ø§Ø±Ø´ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</p>
                        </td>
                    </tr>
                `;
            }
        }
        
        function showHelp() {
            alert(`
ğŸ¤– Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§Øª Ø§ÛŒØªØ§:

1. Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ ØªØ¨ "ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø§ÛŒØªØ§" Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
2. Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ø¯Ø± ØµÙØ­Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
3. Ù¾Ø³ Ø§Ø² Ù„Ø§Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚ØŒ Ø¨Ù‡ ØªØ¨ "Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†" Ø¨Ø±ÙˆÛŒØ¯ Ùˆ ÙØ§ÛŒÙ„ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ† Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
4. Ø¨Ù‡ ØªØ¨ "Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…" Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
5. Ø¯Ú©Ù…Ù‡ "Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„" Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯

âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:
- Ø¨ÛŒÙ† Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ ØªØ£Ø®ÛŒØ± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ ØªØ§ Ø§Ø² ØªØ´Ø®ÛŒØµ Ø±Ø¨Ø§Øª Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø´ÙˆØ¯
- ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„ Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ Ø³ØªÙˆÙ†ÛŒ Ø§Ø² @username Ø¨Ø§Ø´Ø¯
- Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø§Ù†Ø¨ÙˆÙ‡ØŒ Ø­ØªÙ…Ø§Ù‹ ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯

ğŸ› ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ: Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„ Ø§Ø² Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ù…Ú© Ø¨Ú¯ÛŒØ±ÛŒØ¯.
            `);
        }
        
        function clearSystemLog() {
            clearLog('systemLog');
        }
        
        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
            const today = new Date().toISOString().split('T')[0];
            const lastWeek = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            document.getElementById('startDate').value = lastWeek;
            document.getElementById('endDate').value = today;
            
            // ØªØ³Øª Ø§ØªØµØ§Ù„ Ø§ÙˆÙ„ÛŒÙ‡
            testBotConnection();
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            loadSettings();
            loadContacts();
            loadReports();
            refreshDashboard();
            
            // ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆØ¶Ø¹ÛŒØª
            statusInterval = setInterval(() => {
                if (currentBotId) {
                    checkBotStatus();
                }
                refreshDashboard();
            }, 10000); // Ù‡Ø± 10 Ø«Ø§Ù†ÛŒÙ‡
            
            // ØªÙ†Ø¸ÛŒÙ… event listener Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„
            document.getElementById('excelFile').addEventListener('change', function(e) {
                if (e.target.files[0]) {
                    const fileName = e.target.files[0].name;
                    document.getElementById('excelFileName').textContent = fileName;
                }
            });
            
            // ØªÙ†Ø¸ÛŒÙ… Ø§ÙˆÙ„ÛŒÙ‡ Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„
            updateSendType();
            
            addToLog('Ø³ÛŒØ³ØªÙ… Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯', 'info');
        });
        
        // ==================== ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ====================
        
        function formatNumber(num) {
            return num.toLocaleString('fa-IR');
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('fa-IR');
        }
        
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            return `${hours}:${minutes.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>
